---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

// 1. FETCH the real data from your .md files
const tutorials = await getCollection('tutorials');

// 2. SORT them by date (newest first)
const sortedTutorials = tutorials.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---
<Layout title="Tutorials | Sandeep Siyadri">
  <h1 class="text-4xl font-bold text-white mb-12">Technical Tutorials</h1>
  
  <div class="space-y-8">
    {sortedTutorials.map((post) => (
      <a href={`/tutorials/${post.slug}`} class="block p-6 bg-slate-900 border border-slate-800 rounded-xl hover:border-cyan-500 transition-all">
        <p class="text-cyan-400 text-sm font-mono mb-2">
          {post.data.pubDate.toLocaleDateString()}
        </p>
        <h2 class="text-2xl font-bold text-white">{post.data.title}</h2>
        <p class="text-slate-400 mt-2">{post.data.description}</p>
      </a>
    ))}
  </div>
</Layout>